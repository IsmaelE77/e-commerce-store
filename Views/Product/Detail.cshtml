@model Product
@{
    ViewData["Title"] = "Detail";
}
<!-- Page Content -->
<div class="container">

    <!-- Portfolio Item Heading -->
    <h1 class="my-4">@Model.Name</small>
    </h1>
  
    <!-- Portfolio Item Row -->
    <div class="row">
  
      <div class="col-md-8">
        <img class="img-fluid" src="@Model.ImageURL" width="500" height="750" alt="">
      </div>
  
      <div class="col-md-4">
        <h3 class="my-3">Project Description</h3>
        <p>@Model.Description</p>
        <h3 class="my-3">Project Details</h3>
        <p>     Price:@Model.Price</p>
        <p>     Category:@Model.Category.Name</p>
      </div>

    
      <div>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1" required />  
        <button id='addToCart' class="btn btn-danger" onclick="addToCart('@Model.Id')">Add to Cart</button>
      </div>
    </div>

    <!-- /.row -->
    <div class="row">
  @if (Model.DescriptionImages != null)
  {
        @foreach (var item in Model.DescriptionImages)
    {
      <div class="col-md-3 col-sm-6 mb-4">
        <a href="#">
              <img class="img-fluid" src="@item.URL" alt="">
            </a>
      </div>
    }
  }

    </div>
    <!-- /.row -->
  
  </div>
  <!-- /.container -->
  

<script>
    function addToCart(productId) {
        var params = 'ProductId=' + encodeURIComponent(productId) + '&Quantity=' + encodeURIComponent(document.getElementById('quantity').value);

        fetch('/Cart/AddToCart', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: params
        }).then(function (response) {
            if (response.ok) {
                var addToCartButton = document.getElementById('addToCart');
                addToCartButton.textContent = 'Added';
                addToCartButton.disabled = true; // Optional: Disable the button after it's added
            } else {
                alert('Failed to add to cart.');
            }
        }).catch(function (error) {
            console.error('Error:', error);
        });
    }
</script>